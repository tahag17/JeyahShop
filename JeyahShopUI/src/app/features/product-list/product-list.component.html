<div
  class="max-w-6xl mx-auto p-6 bg-surfaceLight dark:bg-surfaceDark rounded-xl shadow-md"
>
  <h2
    class="text-3xl font-heading font-bold text-primaryTail dark:text-primaryDarkTail mb-4"
  >
    Liste des produits
  </h2>

  <!-- Loading & Error -->
  <div *ngIf="loading" class="text-center text-textLight dark:text-textDark">
    Chargement...
  </div>
  <div *ngIf="error" class="text-center text-dangerTail mb-4">{{ error }}</div>

  <!-- Products Table -->
  <table
    *ngIf="!loading && products.length"
    class="w-full text-sm md:text-base border-collapse"
  >
    <thead>
      <tr class="bg-accentTail/10 dark:bg-accentDarkTail/10 text-left">
        <th class="p-2">Nom</th>
        <th class="p-2">Prix</th>
        <th class="p-2">Disponibilit√©</th>
        <th class="p-2">Avis</th>
        <th class="p-2">Image</th>
        <th class="p-2 text-center">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr
        *ngFor="let product of products"
        class="hover:bg-accentTail/10 dark:hover:bg-accentDarkTail/10 transition"
      >
        <!-- Name -->
        <td class="p-2">{{ product.name }}</td>

        <!-- Price -->
        <td class="p-2">{{ product.price }} ‚Ç¨</td>

        <!-- Availability -->
        <td class="p-2">
          <span
            [ngClass]="{
              'text-successTail': product.available,
              'text-dangerTail': !product.available
            }"
          >
            {{ product.available ? "Oui" : "Non" }}
          </span>
        </td>

        <!-- Ratings -->
        <td class="p-2 flex items-center text-yellow-400">
          <ng-container *ngFor="let star of [1, 2, 3, 4, 5]">
            <i class="mr-0.5" [ngClass]="getStarClass(product.rate, star)"></i>
          </ng-container>

          <span class="ml-2 text-textLight dark:text-textDark">
            ({{ product.rate | number : "1.1-2" }})
          </span>
        </td>

        <!-- Image -->
        <td class="p-2">
          <img
            *ngIf="product.imageUrl"
            [src]="product.imageUrl"
            alt="{{ product.name }}"
            class="w-16 h-16 object-cover rounded"
          />
        </td>

        <!-- Actions -->
        <td class="p-2 text-center">
          <button
            class="bg-primaryTail text-white px-3 py-1 rounded hover:bg-primaryTail/80 transition"
            [disabled]="!product.available"
            (click)="addToCart(product.id)"
          >
            üõí Ajouter
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- No Products -->
  <div
    *ngIf="!loading && !products.length"
    class="text-center text-textLight dark:text-textDark"
  >
    Aucun produit trouv√©.
  </div>

  <!-- Pagination -->
  <div
    *ngIf="!loading && totalPages > 1"
    class="flex justify-center gap-4 mt-4 items-center"
  >
    <button
      class="px-3 py-1 bg-accentTail/20 rounded hover:bg-accentTail/40"
      [disabled]="currentPage === 0"
      (click)="goToPage(currentPage - 1)"
    >
      Pr√©c√©dent
    </button>
    <span> Page {{ currentPage + 1 }} / {{ totalPages }} </span>
    <button
      class="px-3 py-1 bg-accentTail/20 rounded hover:bg-accentTail/40"
      [disabled]="currentPage + 1 === totalPages"
      (click)="goToPage(currentPage + 1)"
    >
      Suivant
    </button>
  </div>
</div>
